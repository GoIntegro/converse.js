<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Converse</title>
        <meta charset="utf-8" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Converse XMPP/Jabber Chat" />
        <meta name="author" content="JC Brand" />
        <meta name="keywords" content="xmpp chat webchat converse.js" />
        <link rel="manifest" href="./manifest.json" />
        <link rel="shortcut icon" type="image/ico" href="images/favicon.ico" />
        <link type="text/css" rel="stylesheet" media="screen" href="dist/converse.min.css" />
        <script src="3rdparty/libsignal-protocol.js"></script>
        <script src="dist/converse.min.js"></script>
    </head>

    <body class="reset">
        <script>
            converse.plugins.add('converse-debug', {
                initialize() {
                    const { _converse } = this;
                    window._converse = _converse;
                }
            });

            converse.initialize({
                getAuthorizationToken: function() {
                    return window.prompt('ingrese accessToken en formato: bearer xxxxxxx');
                },

                sticky_controlbox: true,
                auto_away: 300,
                i18n: 'es',
                roster_groups: false,
                show_client_info: false,
                send_chat_state_notifications: ['composing'],
                allow_contact_removal: false,
                allow_muc: false,
                show_toolbar: false,
                show_send_button: true,
                visible_toolbar_buttons: {
                    call: false,
                    spoiler: false,
                    emoji: false,
                    toggle_occupants: false
                },
                // locked_domain: '18',
                // keepalive: true,
                // auto_login: false,
                // auto_join_rooms: [
                //     'discuss@conference.conversejs.org',
                //     'prosody@conference.prosody.im',
                //     'jdev@conference.jabber.org'
                // ],
                // theme: 'concord',
                // muc_show_logs_before_join: true,
                // websocket_url: 'wss://chat.gointegro.com/xmpp-websocket',
                bosh_service_url: 'https://chat.gointegro.com/http-bind', // Please use this connection manager only for testing purposes
                // whitelisted_plugins: ['converse-debug'],
                // view_mode: 'fullscreen',
                // notify_all_room_messages: [
                //     'discuss@conference.conversejs.org'
                // ],
                // jid: 'cristian.soto@chat.gointegro.com',
                auto_login: true,
                prebind: true,
                authentication: 'prebind',
                prebind_url: 'http://api.qa.go5.gointegro.net/prebind',
                enable_smacks: true,
                persistent_store: 'IndexedDB',
                show_send_button: true,
                // muc_respect_autojoin: true,
                message_archiving: 'always',
                loglevel: 'debug',
                allow_logout: false
            });
        </script>
    </body>
</html>
